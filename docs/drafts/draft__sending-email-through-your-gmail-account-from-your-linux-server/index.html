<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>
        Sending email through your gmail account from your Linux server ::
        @brismuth&#39;s blog — I like tinkering and sometimes I write about it.
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="If you want to use a Gmail account as a free SMTP server on your Ubuntu-Linux server, you will find this article useful. This guide is tested with Ubuntu 12.04. If you face any issue, feel free to use the comments section below.
Relaying Postfix mails via smtp.gmail.com: First, install all necessary packages: sudo apt-get install postfix mailutils libsasl2-2 ca-certificates libsasl2-modules
If you do not have postfix installed before, postfix configuration wizard will ask you some questions."
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.brismuth.com/drafts/draft__sending-email-through-your-gmail-account-from-your-linux-server/">






<link rel="stylesheet" href="https://blog.brismuth.com/assets/style.css" />

<link rel="stylesheet" href="https://blog.brismuth.com/style.css" />


<link
  rel="apple-touch-icon-precomposed"
  sizes="144x144"
  href="https://blog.brismuth.com/img/apple-touch-icon-144-precomposed.png"
/>
<link rel="shortcut icon" href="https://blog.brismuth.com/img/favicon.png" />


<link href="https://blog.brismuth.com/assets/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://blog.brismuth.com/assets/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://blog.brismuth.com/assets/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://blog.brismuth.com/assets/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://blog.brismuth.com/assets/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://blog.brismuth.com/assets/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Sending email through your gmail account from your Linux server"/>
<meta name="twitter:description" content="If you want to use a Gmail account as a free SMTP server on your Ubuntu-Linux server, you will find this article useful. This guide is tested with Ubuntu 12.04. If you face any issue, feel free to use the comments section below.
Relaying Postfix mails via smtp.gmail.com: First, install all necessary packages: sudo apt-get install postfix mailutils libsasl2-2 ca-certificates libsasl2-modules
If you do not have postfix installed before, postfix configuration wizard will ask you some questions."/>



<meta property="og:title" content="Sending email through your gmail account from your Linux server" />
<meta property="og:description" content="If you want to use a Gmail account as a free SMTP server on your Ubuntu-Linux server, you will find this article useful. This guide is tested with Ubuntu 12.04. If you face any issue, feel free to use the comments section below.
Relaying Postfix mails via smtp.gmail.com: First, install all necessary packages: sudo apt-get install postfix mailutils libsasl2-2 ca-certificates libsasl2-modules
If you do not have postfix installed before, postfix configuration wizard will ask you some questions." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.brismuth.com/drafts/draft__sending-email-through-your-gmail-account-from-your-linux-server/" />
<meta property="article:published_time" content="2020-10-18T16:10:33-06:00" />
<meta property="article:modified_time" content="2020-10-18T16:10:33-06:00" /><meta property="og:site_name" content="@brismuth&#39;s blog" />






  </head>
  <body class="dark-theme">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >@brismuth&#39;s blog</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About Me</a></li>
        
      
        
          <li><a href="http://stackoverflow.com/users/1569320/brismuth">Stack Overflow</a></li>
        
      
      
      
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About Me</a></li>
      
    
      
        <li><a href="http://stackoverflow.com/users/1569320/brismuth">Stack Overflow</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <div class="post">
    <h1 class="post-title">Sending email through your gmail account from your Linux server</h1>
    <div class="post-meta">
      
        <span class="post-date">
          2020-10-18
        </span>

        
      

      


      
    </div>

    

    

    <div class="post-content">
      
      <p>If you want to use a Gmail account as a free SMTP server on your Ubuntu-Linux server, you will find this article useful. This guide is tested with Ubuntu 12.04. If you face any issue, feel free to use the comments section below.</p>
<h3 id="relaying-postfix-mails-via-smtpgmailcom">Relaying Postfix mails via smtp.gmail.com:</h3>
<p>First, install all necessary packages:
<code>sudo apt-get install postfix mailutils libsasl2-2 ca-certificates libsasl2-modules</code></p>
<p>If you do not have postfix installed before, postfix configuration wizard will ask you some questions. Just select your server as <strong><em>Internet Site</em></strong> and for FQDN use something like <strong><em>mail.example.com</em></strong></p>
<p>Then open your postfix config file:
<code>vim /etc/postfix/main.cf</code></p>
<p>add the following lines to it:
<code>relayhost = [smtp.gmail.com]:587   smtp_sasl_auth_enable = yes   smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd   smtp_sasl_security_options = noanonymous   smtp_tls_CAfile = /etc/postfix/cacert.pem   smtp_use_tls = yes</code></p>
<p>You might have noticed that we haven’t specified our Gmail username and password in above lines. They will go into a different file. Open/Create
<code>vim /etc/postfix/sasl_passwd</code></p>
<p>And add following line:
<code>[smtp.gmail.com]:587    USERNAME@gmail.com:PASSWORD</code></p>
<p>If you want to use your Google App’s domain, please replace <code>@gmail.com</code> with your <code>@domain.com</code></p>
<p>Fix permission and update postfix config to use sasl_passwd file:
<code>sudo chmod 400 /etc/postfix/sasl_passwd   sudo postmap /etc/postfix/sasl_passwd</code></p>
<p>Next, validate certificates to avoid running into error. Just run following command:
<code>cat /etc/ssl/certs/Thawte_Premium_Server_CA.pem | sudo tee -a /etc/postfix/cacert.pem</code></p>
<p>Finally, reload postfix config for changes to take effect:
<code>sudo /etc/init.d/postfix reload</code></p>
<h3 id="testing">Testing</h3>
<h3 id="check-if-mails-are-sent-via-gmail-smtp-server">Check if mails are sent via Gmail SMTP server</h3>
<p>If you have configured everything correctly, following command should generate a test mail from your server to your mailbox.
<code>**echo** &amp;#34;Test mail from postfix&amp;#34; | mail -s &amp;#34;Test Postfix&amp;#34; you@example.com</code></p>
<p>To further verify, if mail sent from above command is actually sent via Gmail’s SMTP server, you can log into Gmail account <a href="mailto:USERNAME@gmail.com">USERNAME@gmail.com</a> with PASSWORD and check <em>“Sent Mail”</em> folder in that Gmail account. By default, Gmail always keeps a copy of mail being sent through its web-interface as well as SMTP server. This logging is one strong reason that we often use Gmail when mail delivery is critical.</p>
<p>Once configured, all emails from your server will be sent via Gmail. This method will be useful if you have many sites on your server and want them all to send emails via Gmail’s SMTP server.</p>
<p>Alternatively, you can use a plugin like <a href="http://wordpress.org/extend/plugins/wp-mail-smtp/">WP Mail SMTP</a> so that mails from your particular WordPress site will be sent using Gmail’s SMTP server.</p>
<p>Please note that Gmail’s SMTP server has a limit of 500 emails per day. So use wisely!</p>
<h3 id="troubleshooting">Troubleshooting</h3>
<p><strong>Error: “SASL authentication failed; server smtp.gmail.com”</strong></p>
<p>You need to unlock the captcha by visiting this page<a href="https://www.google.com/accounts/DisplayUnlockCaptcha">https://www.google.com/accounts/DisplayUnlockCaptcha</a></p>
<p>You can run test again after unlocking captcha.</p>

    </div>
    

    
      
    
  </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >@brismuth&#39;s blog</span
    >
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
        <span
          >© 2020 Powered by
          <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a></span
        >
        <span
          >Theme created by
          <a href="https://twitter.com/panr" target="_blank" rel="noopener">panr</a></span
        >
      </div>
    
  </div>
</footer>

<script src="https://blog.brismuth.com/assets/main.js"></script>
<script src="https://blog.brismuth.com/assets/prism.js"></script>


      
    </div>

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'G-1DF6K9CPKE', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
  </body>
</html>
